<html>
  <head>
    <link href="reset.css" rel="stylesheet" type="text/css">
    <link href="base.css" rel="stylesheet" type="text/css">
    <title>
      hazzens games
    </title>
    <script type="text/javascript" src="d3.v2.min.js"></script>
    <script type="text/javascript" src="base.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-24357809-1']);
      _gaq.push(['_setDomainName', 'hazzens.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div class='header'>
      <div class='left-bar'>
      </div>
      <div class='content'>
        <h1 id='masthead'>
          D3, Conceptually
        </h1>
        <h2 class='lesson'>
          Lesson 1: Introductory Elements
        </h2>
      </div>
    </div>
    <div class='main'>
      <div class='left-bar'>
        <h2 class='border-bottom'>index</h2>
        <ul class='pad-top selector'>
          <li><a href='#'>1. Intro</a></li>
          <li>
          <ul class='selector'>
            <li><a href='#s1'>1.1</a>
            <li><a href='#s2'>1.2</a>
          </ul>
          </li>
        </ul>
      </div>
      <div class='content'>
        <div class='section'>
          <div class='section-header' id='s1'>
            1.1 Beginnings
          </div>
          <div class='section-content'>
            A simple example of basic d3 syntax is as good a starting point as
            any:
            <div class='sample'>
              <div class='code code-html'>&lt;div class='section'&gt;
  First
&lt;/div&gt;
&lt;div class='section'&gt;
  Second
&lt;/div&gt;</div>
              <div class ='code code-js'>d3.select('.section')
    .text('D3 was here');</div>
              <div class='code code-result'></div>
            </div>
            This code can be broken down into two parts:
            <ol>
              <li>a selection, <div class='code code-inline code-js'>d3.select('.section')</div>.
                  This takes a <a href='http://www.w3.org/TR/selectors-api/'>selector</a>
                  and returns a <div class='code code-inline code-js'>d3.selection</div>.
              <li>an operation, <div class='code code-inline code-js'>text('D3 was here')</div>.
                  The <div class='code code-inline code-js'>d3.selection</div>
                  returned by the previous call supports a number of these. The one
                  we called sets the <div class='code code-inline code-js'>textContent</div>
                of the selection to the argument.
            </ol>
            For convenience, d3 is nice and returns the selection itself from
            the operation. So, instead of writing this code:
            <div class='code code-js'>var section = d3.select('.section');
section.text('D3 was here');
section.style('color', '#f0f');  // Magenta to make sure pedestrians see my graffiti!</div>
             d3 lets you write it all in one statement:
            <div class='code code-js'>d3.select('.section')
    .text('D3 was here');
    .style('color', '#f0f');  // Magenta to make sure pedestrians see my graffiti!</div>
          </div>
        </div>
        <div class='section'>
          <div class='section-header' id='s2'>
            1.2 One node? I've got an army!
          </div>
          <div class='section-content'>
            So, you now have the tools to vandalize websites everywhere with
            magenta text letting people know how cool you are. But it would be
            pretty tedious to do so, one node at a time. Plus, as you saw from
            the first demo, the selection from <div class='code code-inline code-js'>d3.select</div>
            only got us the first matching node. Luckily, we have just the tool:
            <div class='sample'>
              <div class='code code-html'>&lt;div class='section'&gt;
  First
&lt;/div&gt;
&lt;div class='section'&gt;
  Second
&lt;/div&gt;</div>
              <div class ='code code-js'>d3.<em>selectAll</em>('.section')
  .text('D3 was here');</div>
              <div class='code code-result'></div>
            </div>
            Now, no <div class='code code-inline code-html'>div</div> is safe
            from your marker.
          </div>
        </div>
        <div class='section'>
          <div class='section-header' id='s3'>
            1.3 Happy little snowflakes
          </div>
          <div class='section-content'>
            You now have the tools to modify either the first node matching a
            selection, or all the nodes matching a selection. Sometimes, though,
            it would be nice to modify each node based on some property. Maybe
            you want the even ones to say 'Even' and the odd ones to say 'Odd'.
            D3, in its infinite wisdom, makes that easy:
            <div class='sample'>
              <div class='code code-html'>&lt;div&gt;&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;</div>
              <div class ='code code-js'>d3.selectAll('div')
  .text(function() {
    var index = Array.prototype.indexOf.call(this.parentElement.children, this);
    return (index % 2) == 0 ? 'Even' : 'Odd';
  });</div>
              <div class='code code-result'></div>
            </div>
            Something of note - D3 defines <div class='code code-js code-inline'>this</div>
            inside the function as "the node the attribute will be set on".
          </div>
        </div>
        <div class='section'>
          <div class='section-header' id='s4'>
            1.4 Playing God
          </div>
          <div class='section-content'>
            All of this modification would be useless if not for the other side
            of the coin - creation! D3 provides an <div class='code code-js code-inline'>
            append</div> method on selections for this purpose. It takes a single
            argument - the tag name of the element to create. This can be any
            valid tag, like <div class='code code-html code-inline'>div</div>
            or <div class='code code-html code-inline'>table</div>. Like most
            <div class='code code-js code-inline'>d3.selection</div> methods, the
            return value is also a <div class='code code-js code-inline'>d3.selection</div>.
            However, it contains the newly-created nodes, and not the original
            selection:
            <div class='sample'>
              <div class='code code-html'>&lt;div class='things'&gt;
  &lt;div&gt;Sugar&lt;/div&gt;
&lt;/div&gt;</div>
              <div class ='code code-js'>d3.select('.things')
  .append('div')
    .style('color', 'red')
    .text('Spice');</div>
              <div class='code code-result'></div>
            </div>
            Like all selection methods, <div class='code code-js code-inline'>append</div>
            operates on all selected nodes. If multiple nodes are selected,
            multiple nodes will be created (and returned):
            <div class='sample'>
              <div class='code code-html'>&lt;div class='things'&gt;
  &lt;div&gt;Sugar&lt;/div&gt;
  &lt;div&gt;Spice&lt;/div&gt;
&lt;/div&gt;</div>
              <div class ='code code-js'>d3.selectAll('.things div')
  .append('div')
    .style('display', 'inline-block')
    .style('color', 'green')
    .text('\u2713');</div>
              <div class='code code-result'></div>
            </div>
            If you've played around with jQuery, or other JavaScript libraries,
            you may notice similarities.
          </div>
        </div>
      </div>
    </div>
    <div class='footer'>
    </div>
  </body>
  <script type="text/javascript">
    tut.init();
  </script>
</html>
